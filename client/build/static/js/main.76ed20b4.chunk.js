(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,t,a){},110:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(41),c=a.n(o),i=(a(51),a(9)),l=(a(52),a(3)),s=a.n(l),u=a(11),d=a(42),m=a(16),p=a(17),h=a(19),f=a(18),b=a(20),v=a(21),g=a(43),w=a.n(g),W=function(){return window.history.replaceState({},document.title,window.location.pathname)},C=r.a.createContext(),E=function(){return Object(n.useContext)(C)},N=a(10);a(55);function k(e){var t=E(),a=t.isAuthenticated,n=t.loginWithRedirect,o=t.logout,c=function(t){e.setCurrentWC(t.target.getAttribute("title")),e.setCurrentWCID(t.target.getAttribute("wcid"))};return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-success"},r.a.createElement("a",{href:"/",className:"navbar-brand"},"Word Cloud Generator"),a&&r.a.createElement("div",{className:"d-inline-flex align-items-baseline"},r.a.createElement("div",{className:"dropdown nav-item"},r.a.createElement(N.b,{className:"nav-link dropdown-toggle",to:"#",id:"wordList",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},r.a.createElement("button",{className:"btn btn-warning"},e.currentWC||"Click Load to Load WordClouds...")),r.a.createElement("ul",{className:"dropdown-menu","aria-labelledby":"wordList"},e.wcList.map(function(e,t){return r.a.createElement("li",{className:"dropdown-item",key:t,onClick:c,title:e.title,wcid:e._id},e.title)})))),r.a.createElement("ul",{className:"navbar-nav ml-auto"},a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement(N.b,{to:"/build"},r.a.createElement("button",{className:"btn btn-warning navbar-btn"},"Build"))),r.a.createElement("li",{className:"nav-item"},r.a.createElement(N.b,{to:"/wordCloud"},r.a.createElement("button",{className:"btn btn-warning navbar-btn"},"Display")))),r.a.createElement("li",{className:"nav-item"},!a&&r.a.createElement("button",{className:"btn btn-info navbar-btn",onClick:function(){return n({})}},"Log in"),a&&r.a.createElement("button",{className:"btn btn-info navbar-btn",onClick:function(){return o()}},"Log out"))))}a(60),a(61),a(62);var S=a(27),j=a.n(S),y=new j.a;y.scale({from:{x:1,y:1},to:{x:1.5,y:1.5},duration:2e3}),y.define("grow");var O=new j.a;O.translate({from:{x:0},to:{x:-30},duration:500}),O.define("move-aside");var x=function(e){return r.a.createElement("div",{className:"word-list"},r.a.createElement("ul",null,e.selectedWords.map(function(t,a){return r.a.createElement("li",{name:t,className:"selected-word",onClick:function(){e.wordHighlight(t)},key:a},t)})))};function D(e){var t="btn btn-success btn-large sidebar-btn",a="",n=t+" build-btn";return e.buildBtnDisabled&&(n+=" disabled",a+=" disable-link"),r.a.createElement("div",{className:"sidebar"},r.a.createElement("div",{className:"button-group"},r.a.createElement("div",null,r.a.createElement("button",{className:t,onClick:e.createNewWC},"Create"),r.a.createElement("button",{className:t,onClick:e.saveWC},"Save")),r.a.createElement("div",null,r.a.createElement(N.b,{to:"/wordCloud",className:a},r.a.createElement("button",{className:n,onClick:e.submitBuild},"Build it")))),r.a.createElement(x,{selectedWords:e.selectedWords,wordHighlight:e.wordHighlight,deleteSeletedWord:e.deleteSelectedWord}))}a(63);var L=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).clearInput=function(e){e.target.value=""},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"search-bar"},r.a.createElement("form",{className:"form-inline",onSubmit:this.props.onSubmit},r.a.createElement("input",{name:"searchWord",value:this.props.searchWord,onChange:this.props.onChange,className:"form-control",id:"search-word-input",type:"search",placeholder:"Search Word","aria-label":"Search Word"})),r.a.createElement("form",{className:"form-inline",onSubmit:this.props.onSubmit},r.a.createElement("input",{name:"searchTopic",value:this.props.searchTopic,onChange:this.props.onChange,className:"form-control",id:"search-topic-input",type:"search",placeholder:"Search Topic (optional)","aria-label":"Search Topic"})))}}]),t}(n.Component),I=(a(64),function(e){var t=e.relatedWords,a=Object.keys(t);return r.a.createElement("div",{className:"word-selector"},r.a.createElement("h3",{className:"chosen-word word"},e.searchWord),r.a.createElement("button",{className:"btn btn-danger btn-sm float-right",onClick:e.deleteBtnClicked},"\xd7"),r.a.createElement("ul",null,a.map(function(a){return t[a].map(function(t,n){return r.a.createElement("li",{className:"word "+a,onClick:function(){e.wordClick(t)},key:n,name:t},t)})})))}),B=(a(65),function(e){return r.a.createElement("form",{className:"form-inline",onSubmit:function(e){return e.preventDefault()}},r.a.createElement("input",{name:"title",value:e.value,onChange:e.onChange,className:"form-control text-center",type:"input",id:"title-input",placeholder:"Press Create For New WordCloud","aria-label":"Title"}))}),T=(a(66),a(14)),A=a.n(T),R={updateWordCloud:function(e,t){return A.a.put("/api/word-cloud/"+e,t)},createWordCloud:function(e){return A.a.post("/api/word-cloud/",e)},getWordClouds:function(e){return A.a.get("/api/word-cloud/all/"+e)},getWordCloudById:function(e){return A.a.get("/api/word-cloud/".concat(e))}},H=10,U=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={buildBtnDisabled:!0,searchWord:"",searchTopic:"",relatedWords:{},selectedWords:[],title:""},a.searchBarUpdate=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(d.a)({},n,r))},a.searchBarSubmit=function(e){e.preventDefault();var t=a.state,n=t.searchWord,r=t.searchTopic;a.addToSelectedList(n,r),a.wordSearch(n,r)},a.deleteSelectedWord=function(e){var t=a.state.selectedWords.filter(function(e){return e!==a.state.searchWord});a.setState({selectedWords:t,relatedWords:{},searchWord:""}),a.verifyBuiltButtonState()},a.addToSelectedList=function(e,t){if(!a.state.selectedWords.includes(e)){var n=a.state.selectedWords;n.push(e),a.setState({selectedWords:n}),a.wordHighlight(e)}},a.wordSearch=function(){var e=Object(u.a)(s.a.mark(function e(t,n){var r,o,c,i,l,u,d,m;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r={},a.setState({relatedWords:r}),o=0,c=["ml","rel_syn","rel_trg","rel_jja","rel_jjb","rel_gen","rel_com"];case 4:if(!(o<c.length)){e.next=17;break}return i=c[o],l="".concat(i,"=").concat(t),n&&(l+="&topic=".concat(n)),u="https://api.datamuse.com/words?".concat(l,"&max=10&md=f"),e.next=11,A.a.get(u);case 11:d=e.sent,m=d.data,r[i]=m.map(function(e){return e.word});case 14:o++,e.next=4;break;case 17:a.setState({relatedWords:r}),a.wordHighlight(t);case 19:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.wordHighlight=function(e){a.setState({searchWord:e}),a.verifyBuiltButtonState()},a.verifyBuiltButtonState=function(){a.state.selectedWords.length>=H?a.setState({buildBtnDisabled:!1}):a.setState({buildBtnDisabled:!0})},a.titleOnChange=function(e){var t=e.target.value;a.setState({title:t})},a.buildWordCloud=function(e){a.saveWordListToDB()},a.createNewWC=Object(u.a)(s.a.mark(function e(){var t,n,r,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.userId,"New WorldCloud",n={userId:t,title:"New WorldCloud",wordList:a.state.selectedWords},e.next=5,R.createWordCloud(n);case 5:r=e.sent,o=r.data._id,a.setState({searchWord:"",searchTopic:"",relatedWords:{},selectedWords:[]}),a.props.setCurrentWC("New WordCloud"),a.props.setCurrentWCID(o),a.props.loadWcList();case 11:case"end":return e.stop()}},e)})),a.saveWordListToDB=function(){if(""===a.state.title)return alert("Title cannot be empty");var e=a.props.currentWCID;if(a.props.setCurrentWC(a.state.title),e){var t={title:a.state.title,words:a.state.selectedWords};R.updateWordCloud(e,t).then(function(t){a.props.loadWcList(e)})}else console.log("no wordcloud created")},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.loadWcList(this.props.currentWCID)}},{key:"componentDidUpdate",value:function(e){var t=this;!this.props.currentWCID||e.currentWCID===this.props.currentWCID&&""!==this.state.title||R.getWordCloudById(this.props.currentWCID).then(function(e){var a=e.data,n=a.title,r=a.words;t.setState({title:n,selectedWords:r})})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-3"},r.a.createElement(D,{buildBtnDisabled:this.state.buildBtnDisabled,selectedWords:this.state.selectedWords,wordHighlight:this.wordSearch,deleteSelectedWord:this.deleteSelectedWord,submitBuild:this.buildWordCloud,saveWC:this.saveWordListToDB,createNewWC:this.createNewWC})),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement(B,{value:this.state.title,onChange:this.titleOnChange}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement(L,{searchWord:this.state.searchWord,onChange:this.searchBarUpdate,onSubmit:this.searchBarSubmit}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement(I,{deleteBtnClicked:this.deleteSelectedWord,searchWord:this.state.searchWord,relatedWords:this.state.relatedWords,wordClick:this.addToSelectedList}))))))}}]),t}(n.Component);U.contextType=C;var _=U,P=a(45),M=a.n(P),z=(a(106),20),F=5,J=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={wordList:[{text:"Loading",value:1e6}]},a.drawWordCloud=function(){var e=a.props.currentWCID;R.getWordCloudById(e).then(function(e){var t=e.data.words;t=t.map(function(e){return{text:e,value:Math.floor(Math.exp(z*Math.random())*F)}}),a.setState({wordList:t})})},a.sizeDown=function(e){var t=e.target.parentElement.parentElement.getAttribute("index"),n=a.state.wordList;n[t].value-=1e3,a.setState({wordList:n})},a.sizeUp=function(e){var t=e.target.parentElement.parentElement.getAttribute("index"),n=a.state.wordList;n[t].value+=1e3,a.setState({wordList:n})},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.currentWCID||this.props.loadWcList(),this.drawWordCloud()}},{key:"componentDidUpdate",value:function(e){e.currentWCID!==this.props.currentWCID&&this.drawWordCloud()}},{key:"render",value:function(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-9"},r.a.createElement(M.a,{data:this.state.wordList,fontSizeMapper:function(e){return 5*Math.log2(e.value)},rotate:function(){return 30*~~(2*Math.random())}})),r.a.createElement("div",{className:"col-lg-3"},r.a.createElement("button",{className:"btn btn-danger btn-lg my-4",onClick:function(){return window.location.reload()}},"Reload")))}}]),t}(n.Component),Q=function(e){var t=E().loginWithRedirect;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"jumbotron"},r.a.createElement("h1",null,"Build Inspiring WordClouds, Fast!"),r.a.createElement("button",{className:"btn btn-warning",onClick:function(){return t({})}},"Start Here"))))},q=a(13),G=function(e){var t=e.component,a=e.path,o=Object(v.a)(e,["component","path"]),c=E(),i=c.loading,l=c.isAuthenticated,d=c.loginWithRedirect;Object(n.useEffect)(function(){i||l||function(){var e=Object(u.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d({appState:{targetUrl:a}});case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[i,l,d,a]);return r.a.createElement(q.b,Object.assign({path:a,render:function(e){return!0===l?r.a.createElement(t,e):null}},o))};var K=function(){var e=E(),t=e.isAuthenticated,a=e.loading,o=e.user,c=Object(n.useState)(),l=Object(i.a)(c,2),s=l[0],u=l[1],d=Object(n.useState)(),m=Object(i.a)(d,2),p=m[0],h=m[1],f=Object(n.useState)([]),b=Object(i.a)(f,2),v=b[0],g=b[1],w="",W="";!0===t&&o&&(w=o.sub,W=w.substring(w.indexOf("|")+1));var C=function(e){R.getWordClouds(W).then(function(t){var a;t.data.length>0&&(g(t.data),e&&(a=t.data.filter(function(t){return t._id===e})[0]),a||(a=t.data[t.data.length-1]),u(a.title),h(a._id))}).catch(function(e){console.log(e)})};return Object(n.useEffect)(function(){},[W]),a?r.a.createElement("div",null,"App Loading..."):r.a.createElement(N.a,null,r.a.createElement("div",{className:"App container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement(k,{userId:W,currentWC:s,currentWCID:p,setCurrentWC:u,setCurrentWCID:h,wcList:v,loadWcList:C}))),r.a.createElement(q.d,null,r.a.createElement(q.b,{exact:!0,path:"/",render:function(){return!1===t?r.a.createElement(Q,null):r.a.createElement(q.a,{to:"/build"})}}),r.a.createElement(G,{path:"/build",render:function(e){return r.a.createElement(_,Object.assign({},e,{userId:W,currentWC:s,currentWCID:p,setCurrentWC:u,setCurrentWCID:h,loadWcList:C}))}}),r.a.createElement(G,{path:"/wordCloud",render:function(e){return r.a.createElement(J,{currentWCID:p,loadWcList:C})}}))))},Z=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function $(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var V=a(28);c.a.render(r.a.createElement(function(e){var t=e.children,a=e.onRedirectCallback,o=void 0===a?W:a,c=Object(v.a)(e,["children","onRedirectCallback"]),l=Object(n.useState)(),d=Object(i.a)(l,2),m=d[0],p=d[1],h=Object(n.useState)(),f=Object(i.a)(h,2),b=f[0],g=f[1],E=Object(n.useState)(),N=Object(i.a)(E,2),k=N[0],S=N[1],j=Object(n.useState)(!0),y=Object(i.a)(j,2),O=y[0],x=y[1],D=Object(n.useState)(!1),L=Object(i.a)(D,2),I=L[0],B=L[1];Object(n.useEffect)(function(){!function(){var e=Object(u.a)(s.a.mark(function e(){var t,a,n,r,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w()(c);case 2:if(t=e.sent,S(t),!window.location.search.includes("code=")){e.next=10;break}return e.next=7,t.handleRedirectCallback();case 7:a=e.sent,n=a.appState,o(n);case 10:return e.next=12,t.isAuthenticated();case 12:if(r=e.sent,p(r),!r){e.next=19;break}return e.next=17,t.getUser();case 17:i=e.sent,g(i);case 19:x(!1);case 20:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[]);var T=function(){var e=Object(u.a)(s.a.mark(function e(){var t,a,n=arguments;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},B(!0),e.prev=2,e.next=5,k.loginWithPopup(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:return e.prev=10,B(!1),e.finish(10);case 13:return e.next=15,k.getUser();case 15:a=e.sent,g(a),p(!0);case 18:case"end":return e.stop()}},e,null,[[2,7,10,13]])}));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(u.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,k.handleRedirectCallback();case 3:return e.next=5,k.getUser();case 5:t=e.sent,x(!1),p(!0),g(t);case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return r.a.createElement(C.Provider,{value:{isAuthenticated:m,user:b,loading:O,popupOpen:I,loginWithPopup:T,handleRedirectCallback:A,getIdTokenClaims:function(){return k.getIdTokenClaims.apply(k,arguments)},loginWithRedirect:function(){return k.loginWithRedirect.apply(k,arguments)},getTokenSilently:function(){return k.getTokenSilently.apply(k,arguments)},getTokenWithPopup:function(){return k.getTokenWithPopup.apply(k,arguments)},logout:function(){return k.logout.apply(k,arguments)}}},t)},{domain:V.domain,client_id:V.clientId,redirect_uri:window.location.origin,onRedirectCallback:function(e){window.history.replaceState({},document.title,e&&e.targetUrl?e.targetUrl:window.location.pathname)}},r.a.createElement(K,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");Z?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):$(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):$(e)})}}()},28:function(e){e.exports={domain:"dev-ayang726.auth0.com",clientId:"neP7aR0EP3cQKHISH1HvZaRQHqWJEPd3"}},46:function(e,t,a){e.exports=a(110)},51:function(e,t,a){},52:function(e,t,a){},55:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){}},[[46,1,2]]]);
//# sourceMappingURL=main.76ed20b4.chunk.js.map